<!-- iron-* -->
<link rel="import" href="../../bower-assets/iron-icons/iron-icons.html">

<!-- paper-* -->
<link rel="import" href="../../bower-assets/paper-button/paper-button.html">
<link rel="import" href="../../bower-assets/paper-card/paper-card.html">
<link rel="import" href="../../bower-assets/paper-input/paper-input.html">
<link rel="import" href="../../bower-assets/paper-input/paper-input-container.html">
<link rel="import" href="../../bower-assets/paper-input/paper-textarea.html">
<link rel="import" href="../../bower-assets/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower-assets/paper-dropdown-menu/paper-dropdown-menu-light.html">
<link rel="import" href="../../bower-assets/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower-assets/paper-item/paper-item.html">
<link rel="import" href="../../bower-assets/paper-fab/paper-fab.html">
<link rel="import" href="../../bower-assets/paper-toggle-button/paper-toggle-button.html">
<link rel="import" href="../../bower-assets/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../../bower-assets/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../../bower-assets/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower-assets/iron-image/iron-image.html">
<link rel="import" href="../../bower-assets/iron-icon/iron-icon.html">
<link rel="import" href="../../bower-assets/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../bower-assets/paper-radio-button/paper-radio-button.html">



<link rel="import" href="../../bower-assets/vaadin-date-picker/vaadin-date-picker.html">

<!-- style -->
<link rel="import" href="../../styles/common-style.html">

<!-- behavior -->
<link rel="import" href="../../behaviors/translating.html">
<link rel="import" href="../../behaviors/page-like.html">
<link rel="import" href="../../behaviors/api-calling.html">
<link rel="import" href="../../behaviors/db-using.html">

<!-- custom-elements -->

<!-- element -->
<dom-module id="page-patient-signup">
  <template>

    <!-- style -->

    <style is="custom-style" include="common-style">

      paper-card {
        border-radius: 6px;
        text-align: left !important;
        background-color: #fff;
      }

      paper-card ::content .header {
        border: none;
      }

      /*paper-card ::content .card-content {
        padding: 40px 16px;
      }*/

      paper-button {
        text-transform: capitalize;
      }

      paper-button.btn.text-success {
        color: rgb(47, 127, 50) !important;
      }
      paper-button.btn.text-info {
        color: var(--paper-blue-700) !important;
      }

      paper-button.btn.text-warning {
        color: var(--paper-orange-900) !important;
      }

      .btn.success {
        background-color: var(--paper-green-700);
        color: #fff;
      }

      .p-horizontal-16 {
        padding-left: 16px;
        padding-right: 16px;
      }

      .p-horizontal-8 {
        padding-left: 8px;
        padding-right: 8px;
      }

      .m-0 {
        margin: 0 !important;
      }

      .m-top-40 {
        margin-top: 40px;
      }

      .m-top-24 {
        margin-top: 24px;
      }

      .m-top-16 {
        margin-top: 16px;
      }

      .m-top-8 {
        margin-top: 8px;
      }

      .m-right-16 {
        margin-right: 16px;
      }

      /*.card {
        width: 370px;
      }*/

      paper-button.btn.medium {
        font-size: 14px;
      }
      .user-avatar {
        height: 64px;
        width: 64px;
        border-radius: 50%;
      }

      .user-avatar.small {
        height: 36px;
        width: 36px;
      }

      .user-avatar.medium {
        height: inherit;
        width: inherit;
      }

      .type-content paper-button {
        margin: 8px;
        width: calc(50% - 18px);
      }

      .user-info {
        background-color: #f7f7f7;
        padding: 16px 24px !important;
      }
      iron-icon.icon.small {
        height: 16px;
        width: 16px;
      }

      .m-right-4 {
        margin-right: 4px;
      }

      .image.normal-size {
        height: 64px;
        width: 64px;
      }

      .image.mid-size {
        height: 48px;
        width: 48px;
      }

      .shadow-2 {
        box-shadow: var(--shadow-elevation-2dp_-_box-shadow);
      }

      .content {
        /*padding: 8px;*/
      }


      .content.left {
        width: calc(40%);
      }

      .content.right {
        width: calc(60%);
      }

      .custom-input {
        width: calc(100% - 26px);
      }

      @media screen and (min-width: 656px) {
        .custom-input {
          width: calc(50% - 26px);
        }
      }

      @media screen and (min-width: 976px) {
        .custom-input {
          width: calc(33.33333% - 26px);
        }
      }

      .paper-custom {
        background-color: #fff;
        border: 1px solid #dadada;
        border-radius: 6px;
        padding: 0px 8px 12px 8px;
        margin: 8px;
        min-width: calc(100% - 26px);
      }



      @media screen and (min-width: 656px) {
        .paper-custom {
          min-width: calc(50% - 26px);
        }
        .paper-custom.full {
          min-width: calc(100% - 26px);
        }
      }

      @media screen and (min-width: 976px) {
        .paper-custom {
          min-width: calc(33.33333% - 26px);
        }
        .paper-custom.full {
          min-width: calc(100% - 26px);
        }
      }

      .custom-label-2 {
        background-color: #fafafa;
        padding: 6px 12px;
        margin: 8px;
        width: calc(100% - 36px);
        border-radius: 6px;
        border: 2px solid #eee;
      }

      .custom-label-2 .type {
        font-weight: 500 !important;
      }

      .custom-label-2.normal {
        border-color: #43A047;
        color: #43A047 !important;
      }

      .custom-label-2.warning {
        border-color: #E65100;
        color: #E65100 !important;
      }

      .custom-label-2.danger {
        border-color: #E53935;
        color: #E53935 !important;
      }

      @media screen and (min-width: 656px) {
        .custom-label-2 {
          width: calc(50% - 36px);
        }
      }

      @media screen and (min-width: 976px) {
        .custom-label-2 {
          width: calc(33.33333% - 36px);
        }
      }

      .custom-radio-button-group.full-width {
        width: calc(100% - 26px) !important;
      }

      .custom-label.full-width {
        width: calc(100% - 26px) !important;
      }


      .custom-radio-button-group,
      .custom-label {
        background-color: #fff;
        border: 1px solid #dadada;
        border-radius: 6px;
        padding: 8px;
        margin: 8px;
        width: calc(100% - 26px);
      }

      @media screen and (min-width: 656px) {
        .custom-radio-button-group,
        .custom-label {
          width: calc(50% - 26px);
        }
      }

      @media screen and (min-width: 976px) {
        .custom-radio-button-group,
        .custom-label {
          width: calc(33.33333% - 26px);
        }
      }

      .profile-image-area {
        position: relative;
        height: 128px;
        width: 128px;
        margin-top: 33px;
      }

      #fileInput {
        position: absolute;
        height: 100%;
        width: 100%;
        left: 0;
        top: 0;
        cursor: pointer;
        opacity: 0;
      }

      #fileInput:hover {
        background-color: rgba(0,0,0, .56)
      }

      .p-horizontal-40 {
        padding-left: 40px;
        padding-right: 40px;
      }
    </style>

    <!-- local DOM -->
    <div class="master-container">
      <div class="limiting-container">

        <paper-card class="card">

         
          
          <div class="card-content">
            <iron-image class="p-horizontal-8" src="../../images/bdemr_logo_small.png" preload></iron-image>
            <div class="type headline p-horizontal-8">Patient Signup</div>
          </div>

          <iron-pages selected="{{selectedPage}}">

            <!-- step 1 - start  -->
            <section>
              <div class="card-content horizontal layout">
                <div class="content left">
                  <div class="custom-label full-width" style="background-color: #f7f7f7;">

                    <div class="horizontal layout center-justified center">
                      <div class="profile-image-area">
                        <iron-image class="user-avatar medium" src$="[[profileImage]]" preload sizing="cover"></iron-image>
                        <input id="fileInput" type="file" accept="image/*" on-change="fileInputChanged"></paper-input>
                      </div>
                    </div>
                    <div class="type caption text-center secondary m-top-8 p-horizontal-8 center horizontal layout">
                      <!-- <iron-icon icon="icons:lightbulb-outline" class="icon small m-right-4"></iron-icon> -->
                      <div class="flex">we recommend you to add your profile photo so that your doctor/service provider can identify you better.</div>
                    </div>

                    <paper-input class="p-horizontal-8 m-top-16" label="NID/Birth Certificate Number" required min="10" max="17"></paper-input>
                    <div class="type caption secondary p-horizontal-8 horizontal layout center">
                      <!-- <iron-icon icon="icons:info-outline" class="icon small m-right-4"></iron-icon> -->
                      <div class="flex">you can add any old/newly issue NID card/Birth certificate number if you don't have any of those</div>
                    </div>
                  </div>
                </div>

                <div class="content right flex">
                  

                  <paper-input class="custom-input paper-custom full" label="Full Name" required value="{{patient.name}}" label="Full Name" auto-validate error-message="Patient Name is Required!" on-keyup="checkNextBtnStatus"></paper-input>

                  <div class="custom-input paper-custom horizontal layout full">
                    <vaadin-date-picker on-keyup="checkNextBtnStatus" required auto-validate error-message="Date of Birth is Required!" class="flex m-right-16" type="date" value="{{patient.dateOfBirth}}" label="Date of Birth" on-value-changed="calculateAge"></vaadin-date-picker>

                    <paper-input label="Age" type="number" value="{{ageInYears}}" on-change="makeDOBFromYears"></paper-input>
                  </div>
                  

                  <div class="custom-radio-button-group full-width">
                    
                    <div class="type body secondary">Gender</div>
                    <paper-radio-group selected="{{patient.gender}}">
                      <paper-radio-button name="male">Male</paper-radio-button>
                      <paper-radio-button name="female">Female</paper-radio-button>
                      <paper-radio-button name="other">Other</paper-radio-button>
                    </paper-radio-group>
                  </div>

                  <paper-input class="custom-input paper-custom full" class="p-horizontal-8" value="{{patient.phone}}" label="Phone Number" pattern="^[0-9]{11,11}(-[0-9]*){0,1}$" required auto-validate error-message="Phone Number Required. i.e.: 01712345678 or 01712345678-12'" char-counter minlength="11" maxlength="14">
                    <div prefix>+88</div>
                  </paper-input>

                  <template is="dom-if" if="[[errorMsg]]">
                    <div class="p-top-8 type caption-2 danger p-horizontal-8 horizontal layout center">
                      <iron-icon icon="icons:info-outline" class="icon small m-right-4"></iron-icon>
                      <div class="flex">{{errorMsg}}</div>
                    </div>
                  </template>

                  <template is="dom-if" if="[[successMsg]]">
                    <div class="p-top-8 type caption-2 primary p-horizontal-8 horizontal layout center">
                      <iron-icon icon="icons:info-outline" class="icon small m-right-4"></iron-icon>
                      <div class="flex">{{successMsg}}</div>
                    </div>
                  </template>

                  <paper-input class="custom-input paper-custom full" class="p-horizontal-8" value="{{patient.repeatPhone}}" required label="Repeat Phone Number"
                   char-counter minlength="11" maxlength="14" on-keyup="_checkForPhoneNumberMatch">
                    <div prefix>+88</div>
                  </paper-input>

                  <template is="dom-if" if="[[errorMsg2]]">
                    <div class="p-top-8 type caption-2 danger p-horizontal-8 horizontal layout center">
                      <iron-icon icon="icons:info-outline" class="icon small m-right-4"></iron-icon>
                      <div class="flex">{{errorMsg2}}</div>
                    </div>
                  </template>

                  <template is="dom-if" if="[[successMsg2]]">
                    <div class="p-top-8 type caption-2 primary p-horizontal-8 horizontal layout center">
                      <iron-icon icon="icons:info-outline" class="icon small m-right-4"></iron-icon>
                      <div class="flex">{{successMsg2}}</div>
                    </div>
                  </template>

                  <paper-input class="custom-input paper-custom full" label="Email" value="{{patient.email}}" pattern='^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$' error-message="Please Enter valid Email."></paper-input>


                  <paper-input class="custom-input paper-custom full" label="Repeat Email" value="{{patient.repeatEmail}}" on-keyup="_checkForEmailMatch"></paper-input>
                  <template is="dom-if" if="[[errorMsg3]]">
                    <div class="p-top-8 type caption-2 danger p-horizontal-8 horizontal layout center">
                      <iron-icon icon="icons:info-outline" class="icon small m-right-4"></iron-icon>
                      <div class="flex">{{errorMsg3}}</div>
                    </div>
                  </template>

                  <template is="dom-if" if="[[successMsg3]]">
                    <div class="p-top-8 type caption-2 primary p-horizontal-8 horizontal layout center">
                      <iron-icon icon="icons:info-outline" class="icon small m-right-4"></iron-icon>
                      <div class="flex">{{successMsg3}}</div>
                    </div>
                  </template>

                  <paper-input class="custom-input paper-custom full" label="Password" required value="{{patient.password}}" auto-validate error-message="Password is Required!"></paper-input>

                  <paper-input class="custom-input paper-custom full" label="Doctor Access Pin" required value="{{patient.doctorAccessPin}}" auto-validate error-message="Doctor Access Pin is Required!"></paper-input>

                  

                  
                  


                  <div class="horizontal layout m-top-16 center">
                    <div class="flex"></div>
                    <paper-button  class="p-horizontal-40" on-tap="offlineSignup" raised>Signup (offline)</paper-button>
                    <paper-button class="colored p-horizontal-40" raised auto-focuse on-tap="nextBtnPressed">Signup</paper-button>
                  </div>
                </div>
              </div>
            </section>
            <!-- step 1 - end  -->
            
            <!-- step 2 - start  -->
            <section>
              <div class="card-content">

                <div class="layout center">
                  <!-- <div class="type headline p-horizontal-8 m-top-24">Dear, John Doe</div> -->
                  <div class="type body-lead p-horizontal-8">we sent a verification code on patient phone number.</div>
                  <!-- <div class="type body secondary p-horizontal-8">please wait for <span>0:59s</span></div> -->
                  <!-- <div class="type headline p-horizontal-8">017123456789</div> -->
                </div>
                

                <paper-input class="p-horizontal-8" label="Verification Code" value="{{verifyPhoneNumber.typedSmsVerificationCode}}"></paper-input>

                <div class="horizontal layout m-top-24 center">
                  <div class="flex"></div>
                  <paper-button auto-focuse on-tap="" disabled>Resend Code</paper-button>
                  <paper-button raised class="btn success p-horizontal-40" auto-focuse on-tap="verifyBtnPressed">Verify</paper-button>
                </div>

              </div>
              
            </section>
            <!-- step 2 - end  -->
          </iron-pages>


        </paper-card>

      </div>
    </div>

   

  </template>
  <script src="page-patient-signup.coffee-compiled.js"></script>
</dom-module>
